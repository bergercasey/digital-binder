<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HVAC Digital Binder</title>
  <style>
    :root {
      --bg: #fff;
      --ink: #111;
      --muted: #6b7280;
      --line: #e5e7eb;
      --accent: #2563eb;
      --accent-ink: #fff;
      --pad: 12px;
    }
    * { box-sizing: border-box; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; color: var(--ink); background: var(--bg); }
    header { padding: 10px var(--pad); border-bottom: 1px solid var(--line); position: sticky; top: 0; background: var(--bg); z-index: 10; }
    h1 { margin: 0 0 6px; text-align: center; font-size: 20px; font-weight: 700; }
    .toolbar { display:flex; justify-content:center; gap:8px; flex-wrap:wrap; }
    button, select, input[type="text"], textarea {
      font: inherit;
      padding: 6px 10px;
      border: 1px solid var(--line);
      border-radius: 6px;
      background: #fff;
      cursor: pointer;
    }
    button.primary { background: var(--accent); color: var(--accent-ink); border-color: var(--accent); }
    button.danger { background: #ef4444; color: #fff; border-color: #ef4444; }
    button.ghost { background: transparent; border-color: var(--line); }
    .status { text-align:center; font-size:12px; color: var(--muted); margin-top: 6px; }
    main { display: grid; grid-template-columns: 260px 1fr; min-height: calc(100vh - 100px); }
    aside { border-right: 1px solid var(--line); padding: var(--pad); }
    .aside-head { display:flex; justify-content:space-between; align-items:center; margin-bottom: 8px; }
    .list { display:flex; flex-direction:column; gap:6px; }
    .contractor {
      display:flex; align-items:center; gap:6px; padding:6px 8px; border:1px solid var(--line); border-radius: 8px; cursor:pointer;
    }
    .contractor.active { outline: 2px solid var(--accent); }
    .contractor input { width: 100%; border:none; outline:none; }
    section.content { padding: var(--pad); }
    .top-row { display:flex; flex-wrap:wrap; gap:8px; align-items:center; justify-content:space-between; margin-bottom: 10px; }
    .tabs { display:flex; gap:6px; flex-wrap:wrap; align-items:center; }
    .tab {
      padding: 6px 10px; border:1px solid var(--line); border-radius: 999px; cursor:pointer;
      display:flex; align-items:center; gap:6px; background:#fff;
    }
    .tab.active { background: var(--accent); color: var(--accent-ink); border-color: var(--accent); }
    .pill { font-size: 12px; color: var(--muted); }
    .fields { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    .field { display:flex; flex-direction:column; gap:6px; }
    label { font-size: 12px; color: var(--muted); }
    textarea { min-height: 120px; resize: vertical; }
    .row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .spacer { flex:1; }
    .archive-toggle { display:flex; align-items:center; gap:6px; }
    .muted { color: var(--muted); }
    .settings { margin-top: 12px; border-top: 1px solid var(--line); padding-top: 12px; }
    .chips { display:flex; gap:6px; flex-wrap:wrap; }
    .chip { padding: 4px 8px; border:1px solid var(--line); border-radius:999px; font-size:12px; }
    @media (max-width: 900px) {
      main { grid-template-columns: 1fr; }
      aside { border-right: none; border-bottom: 1px solid var(--line); }
      .fields { grid-template-columns: 1fr; }
    }
    /* Toasts */
    .toast-wrap {
      position: fixed;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      flex-direction: column;
      z-index: 9999;
      pointer-events: none;
    }
    .toast {
      pointer-events: auto;
      padding: 10px 14px;
      border: 1px solid var(--line);
      border-radius: 10px;
      background: #fff;
      box-shadow: 0 6px 24px rgba(0,0,0,0.12);
      font-size: 14px;
      min-width: 200px;
      text-align: center;
    }
    /* Error banner */
    .errbar {
      position: fixed;
      top: 0; left: 0; right: 0;
      background: #fee2e2;
      color: #991b1b;
      padding: 8px 12px;
      font-size: 13px;
      border-bottom: 1px solid #fecaca;
      z-index: 10000;
      display: none;
    }
  </style>
</head>
<body>
  <div class="errbar" id="errbar"></div>

  <header>
    <h1>HVAC Digital Binder</h1>
    <div class="toolbar">
      <button class="primary" id="add-contractor">+ Contractor</button>
      <button class="ghost" id="settings-btn">Settings</button>
      <button class="ghost" id="refresh-btn">Reload</button>
      <div class="spacer"></div>
    </div>
    <div class="status" id="status">Loaded</div>
  </header>

  <main>
    <aside>
      <div class="aside-head">
        <strong>Contractors</strong>
        <span class="muted" id="contractor-count"></span>
      </div>
      <div class="list" id="contractor-list"></div>
    </aside>

    <section class="content">
      <div class="top-row">
        <div class="tabs" id="job-tabs"></div>
        <div class="row">
          <div class="archive-toggle">
            <input type="checkbox" id="show-archived"/>
            <label for="show-archived">Show archived</label>
          </div>
          <button class="ghost" id="add-job">+ Job</button>
          <button class="ghost" id="archive-job">Archive</button>
          <button class="danger" id="delete-job">Delete</button>
        </div>
      </div>

      <div class="fields">
        <div class="field">
          <label>Job Name</label>
          <input type="text" id="job-name" placeholder="e.g., 123 Main St Buildout" />
        </div>
        <div class="field">
          <label>Stage</label>
          <select id="job-stage"></select>
        </div>
        <div class="field">
          <label>Crew</label>
          <div id="crew-box" class="chips"></div>
        </div>
        <div class="field">
          <label>Notes</label>
          <textarea id="job-notes" placeholder="Updates, materials, inspections, dates..."></textarea>
        </div>
      </div>

      <div class="row" style="margin-top:10px;">
        <div class="muted">Last updated: <span id="job-updated">â€”</span></div>
        <div class="spacer"></div>
        <button id="duplicate-job" class="ghost">Duplicate</button>
      </div>

      <div class="settings" id="settings-section">
        <h3 style="margin:0 0 6px;">Settings</h3>
        <div class="fields">
          <div class="field">
            <label>Roster (one per line)</label>
            <textarea id="roster-input" placeholder="e.g., Alice
Bob
Chris"></textarea>
          </div>
          <div class="field">
            <label>Stages (one per line)</label>
            <textarea id="stages-input" placeholder="e.g., Bid
Rough-in
Trim
Complete"></textarea>
          </div>
        </div>
        <div class="row" style="margin-top:8px;">
          <button id="save-settings" class="primary">Save Settings</button>
          <span class="muted">These power the dropdowns above.</span>
        </div>
      </div>
    </section>
  </main>

  <div class="toast-wrap" id="toast-wrap" aria-live="polite" aria-atomic="true"></div>

  <!-- Load external JS (no inline script, uses defer so DOM is ready) -->
  <script defer src="app.js"></script>
</body>
</html>
